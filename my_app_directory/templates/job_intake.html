{% extends 'employee_base.html' %}
{% block title %}Job Intake Form{% endblock %}
{% block content %}
<div class="container">
    <h2>Job Intake Form</h2>

    <!-- Flash messages for form submission feedback -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="flash {{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
    {% endwith %}

    <!-- Form submission with CSRF protection -->
    <form action="{{ url_for('job.job_intake') }}" method="POST">
        {{ form.hidden_tag() }}

        <!-- Render each form field dynamically using Flask-WTF -->
        <div class="form-group">
            {{ form.job_title.label }}
            {{ form.job_title(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.date.label }}
            {{ form.date(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.client_name.label }}
            {{ form.client_name(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.phone_number.label }}
            {{ form.phone_number(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.email.label }}
            {{ form.email(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.address.label }}
            {{ form.address(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.job_description.label }}
            {{ form.job_description(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.priority.label }}
            {{ form.priority(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.technician_assigned.label }}
            {{ form.technician_assigned(class_='form-control', required=True) }}
        </div>

        <div class="form-group">
            {{ form.status.label }}
            {{ form.status(class_='form-control', required=True) }}
        </div>

        <!-- Terms and conditions acknowledgment -->
        <div class="form-group">
            <input type="checkbox" id="terms" name="terms" required>
            <label for="terms">I acknowledge and agree to the Terms & Conditions</label>
        </div>

        <!-- Submit button -->
        <button type="submit" class="btn">Submit</button>
    </form>
</div>
{% endblock %}
